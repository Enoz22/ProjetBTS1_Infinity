generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id               Int @id @default(autoincrement())
  nom              String
  prenom           String
  email            String @unique
  motDePasse       String?
  adresse          String?
  telephone        String?
  dateInscription  DateTime?
  role             String
  reservations     Reservation[]
  reviews          Review[]
  VendeurId        Int?
}

model Car {
  id                  Int @id @default(autoincrement())
  marque              String
  modele              String
  annee               Int
  prixLocationParJour Float
  description         String
  statutDisponibilite String
  reservations        Reservation[]
  reviews             Review[]
  carImages           CarImage[]
  maintenanceHistory  MaintenanceHistory[]
}

model Reservation {
  id               Int @id @default(autoincrement())
  userId           Int
  carId            Int
  dateDebut        DateTime
  dateFin          DateTime
  prixTotal        Float
  statutReservation String
  user             User @relation(fields: [userId], references: [id])
  car              Car  @relation(fields: [carId], references: [id])
  payment          Payment?
}

model Payment {
  id            Int @id @default(autoincrement())
  reservationId Int @unique
  datePaiement  DateTime
  methodePaiement String
  reservation   Reservation @relation(fields: [reservationId], references: [id])
}

model Review {
  id            Int @id @default(autoincrement())
  userId        Int
  carId         Int
  note          Int
  commentaire   String
  dateReview    DateTime
  user          User @relation(fields: [userId], references: [id])
  car           Car @relation(fields: [carId], references: [id])
}

model CarImage {
  id                Int @id @default(autoincrement())
  carId             Int
  cheminImage       String
  descriptionImage  String
  car               Car @relation(fields: [carId], references: [id])
}

model MaintenanceHistory {
  id                Int @id @default(autoincrement())
  carId             Int
  dateMaintenance   DateTime
  details           String
  cout              Float
  car               Car @relation(fields: [carId], references: [id])
}
